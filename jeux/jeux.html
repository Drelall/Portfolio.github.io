<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu du Tableau √† Poudlard</title>
    <link rel="stylesheet" href="../style.css">
    <!-- Mode local - pas de d√©pendances externes -->
    <!-- Le style est d√©plac√© dans style.css -->
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <!-- Zone cliquable sur le bloc de pierre -->
    <a href="../index.html" class="stone-block-link" title="Retour √† l'accueil"></a>
    <!-- Zone de survol pour le tableau -->
    <div class="frame-hover-area" id="frameHoverArea"></div>
    
    <!-- Barre d'authentification -->
    <div class="auth-bar">
        <div class="auth-container">
            <div id="userInfo" class="user-info" style="display: none;">
                <span id="userDisplayName"></span>
                <button id="accountBtn" class="btn-primary">Mon Compte</button>
                <button id="logoutBtn" class="btn-secondary">D√©connexion</button>
            </div>
            <div id="authButtons" class="auth-buttons">
                <button id="loginBtn" class="btn-primary">Se connecter</button>
                <button id="signupBtn" class="btn-secondary">S'inscrire</button>
            </div>
        </div>
    </div>
    
    <!-- Formulaire de connexion/inscription -->
    <div id="authModal" class="character-modal" style="display: none;">
        <div class="character-form-container">
            <div class="character-form-header">
                <h2 id="authTitle">Se connecter</h2>
                <button id="closeAuthBtn" class="close-btn">&times;</button>
            </div>
            <form id="authForm" class="character-form">
                <div class="form-group" id="firstNameGroup" style="display: none;">
                    <label for="firstName">Pseudo :</label>
                    <input type="text" id="firstName" name="firstName" placeholder="Votre pseudo">
                </div>
                <div class="form-group">
                    <label for="email">Email :</label>
                    <input type="text" id="email" name="email" required placeholder="votre@email.com">
                </div>
                <div class="form-group">
                    <label for="password">Mot de passe :</label>
                    <input type="password" id="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6">
                </div>
                <div class="form-actions">
                    <button type="button" id="prevAuthBtn" class="btn-secondary" style="display: none;">Pr√©c√©dent</button>
                    <button type="button" id="cancelAuthBtn" class="btn-secondary">Annuler</button>
                    <button type="button" id="authSubmitBtn" class="btn-primary">Se connecter</button>
                    <button type="button" id="nextToCharacterBtn" class="btn-primary" style="display: none;">Continuer vers la cr√©ation de personnage</button>
                </div>
                <div class="auth-switch">
                    <p id="authSwitchText">Pas encore de compte ? <a href="#" id="authSwitchLink">S'inscrire</a></p>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Formulaire de cr√©ation de personnage -->
    <div id="characterFormModal" class="character-modal">
        <div class="character-form-container">
            <div class="character-form-header">
                <h2>√âtape 2</h2>
                <button id="closeFormBtn" class="close-btn">&times;</button>
            </div>
            <form id="characterForm" class="character-form">
                <!-- √âtape 1: Informations de base -->
                <div id="step1" class="form-step active">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="characterFirstName">Pr√©nom :</label>
                            <input type="text" id="characterFirstName" name="characterFirstName" maxlength="20" placeholder="pr√©nom">
                        </div>

                        <div class="form-group">
                            <label for="characterLastName">Nom :</label>
                            <input type="text" id="characterLastName" name="characterLastName" maxlength="20" placeholder="nom">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="characterClass">Classe de personnage :</label>
                        <select id="characterClass" name="characterClass">
                            <option value="">-- Choisissez une classe --</option>
                            <option value="agent">Agent du Gouvernement</option>
                            <option value="initie">Initi√©</option>
                            <option value="sorcier">Sorcier</option>
                            <option value="citoyen">Citoyen</option>
                        </select>
                    </div>

                    <div class="class-description" id="classDescription">
                        <p>S√©lectionnez une classe pour voir sa description.</p>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="prevToAuthBtn" class="btn-secondary">Pr√©c√©dent</button>
                        <button type="button" id="cancelBtn" class="btn-secondary">Annuler</button>
                        <button type="button" id="nextStepBtn" class="btn-primary">Suivant</button>
                    </div>
                </div>

                <!-- √âtape 2: Type de personnage -->
                <div id="step2" class="form-step">
                    <div class="form-group">
                        <label for="characterType">Type de personnage :</label>
                        <select id="characterType" name="characterType">
                            <option value="">-- Choisissez un type --</option>
                        </select>
                    </div>

                    <div class="type-description" id="typeDescription">
                        <p>S√©lectionnez un type pour voir sa description.</p>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="prevStepBtn" class="btn-secondary">Pr√©c√©dent</button>
                        <button type="submit" id="finalizeRegistrationBtn" class="btn-primary">Finaliser l'inscription</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal Mon Compte -->
    <div id="accountModal" class="character-modal" style="display: none;">
        <div class="character-form-container">
            <div class="character-form-header">
                <h2>Mon Compte</h2>
                <button id="closeAccountBtn" class="close-btn">&times;</button>
            </div>
            <div class="account-content">
                <!-- Informations personnelles -->
                <div class="account-section">
                    <h3>Informations personnelles</h3>
                    <div class="account-info">
                        <div class="info-row">
                            <span class="info-label">Pseudo :</span>
                            <span id="accountFirstName" class="info-value">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Email :</span>
                            <span id="accountEmail" class="info-value">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Membre depuis :</span>
                            <span id="accountCreatedAt" class="info-value">-</span>
                        </div>
                    </div>
                </div>

                <!-- Informations du personnage -->
                <div class="account-section">
                    <h3>Mon Personnage</h3>
                    <div id="characterInfo" class="account-info">
                        <div class="info-row">
                            <span class="info-label">Nom complet :</span>
                            <span id="characterFullName" class="info-value">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Classe :</span>
                            <span id="characterClass" class="info-value">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Type :</span>
                            <span id="characterType" class="info-value">-</span>
                        </div>
                    </div>
                    <div id="noCharacterInfo" class="no-character" style="display: none;">
                        <p>Aucun personnage cr√©√©.</p>
                        <button class="btn-primary">Cr√©er un personnage</button>
                    </div>
                </div>

                <!-- Actions du compte -->
                <div class="account-section">
                    <h3>Actions</h3>
                    <div class="account-actions">
                        <button id="resendEmailBtn" class="btn-secondary">
                            üìß Renvoyer l'email de confirmation
                        </button>
                        <small class="action-help">Cliquez pour recevoir √† nouveau l'email de bienvenue</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts en mode local -->
    <script src="../javascript/email-service.js"></script>
    <script src="../javascript/auth-manager.js"></script>
    <script src="../javascript/character-manager.js"></script>
    <script src="../javascript/jeux.js"></script>
</body>
</html>
